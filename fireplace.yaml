esphome:
  name: fireplace
  platform: ESP8266
  board: nodemcuv2
  includes:
    - cc1101.h
    - fireplace.h
  libraries:
    - SPI
    - "SmartRC-CC1101-Driver-Lib"

wifi:
  ssid: !secret ssid
  password: !secret password
  fast_connect: true
  power_save_mode: HIGH

logger:
api:
ota:


sensor:
  - platform: custom
    lambda: |-
      auto my_sensor = new CC1101(
        D5, // SCK
        D6, // MISO
        D7, // MOSI
        D3, // CSN
        D1, // GDO0
        300, // bandwidth_in_khz
        315 // freq_in_mhz
      );
      App.register_component(my_sensor);
      return {my_sensor};
    sensors:
      id: transciver
      internal: true
remote_transmitter:
  - pin: D1 # This is GDO0
    carrier_duty_percent: 100%

remote_receiver:
  - pin: D2 # This is GDO2
      # on the esp8266 use any of D1,D2,D5,D6,D7,Rx
    # Don't use D3,D4,D8,TX, boot often fails.
    # Can't be D0 or GPIO17 b/c no interrupts

    buffer_size: 600
    # Uncomment the following lines to enable dumping signals received to the console
#    dump:
#      - raw
    on_raw:
      - globals.set:
          id: trigger_enabled
          value: "false"
      - lambda: |-
          int code = getCode(x);
          if (code == 0) {
            id(fireplace_state_id).turn_off();
          } else if (code >= 1 && code <= 6) {
            id(fireplace_state_id).turn_on(); 
            id(fireplace_level_id).make_call().set_value(code).perform();
          }
      - globals.set:
          id: trigger_enabled
          value: "true"

number:
  - platform: template
    name: "Fireplace power"
    id: fireplace_level_id
    optimistic: true
    min_value: 1
    max_value: 6
    step: 1
    set_action:
      then:
        - if:
            condition:
              switch.is_on: fireplace_state_id
            then:
              - switch.turn_on: fireplace_state_id

switch:
  - platform: template
    name: "Fireplace"
    id: fireplace_state_id
    restore_mode: RESTORE_DEFAULT_OFF
    optimistic: true
    turn_on_action:
      then:
        - if:
            condition:
              lambda: return id(trigger_enabled);
            then:
              - if:
                  condition:
                    lambda: return id(fireplace_level_id).state == 6;
                  then:
                    - lambda: get_cc1101(transciver).beginTransmission();
                    - remote_transmitter.transmit_raw:
                        code: [
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800
                        ]
                    - lambda: get_cc1101(transciver).endTransmission();
              - if:
                  condition:
                    lambda: return id(fireplace_level_id).state == 5;
                  then:
                    - lambda: get_cc1101(transciver).beginTransmission();
                    - remote_transmitter.transmit_raw:
                        code: [
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 400, -400, 800, -400, 400, -800, 800, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 400, -400, 800, -400, 400, -800, 800, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 400, -400, 800, -400, 400, -800, 800, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 400, -400, 800, -400, 400, -800, 800, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 400, -400, 800, -400, 400, -800, 800, -800, 400, -400, 400, -400, 800
                        ]
                    - lambda: get_cc1101(transciver).endTransmission();
              - if:
                  condition:
                    lambda: return id(fireplace_level_id).state == 4;
                  then:
                    - lambda: get_cc1101(transciver).beginTransmission();
                    - remote_transmitter.transmit_raw:
                        code: [
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 800, -400, 400, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 800, -400, 400, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 800, -400, 400, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 800, -400, 400, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 800, -400, 400, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800
                        ]
                    - lambda: get_cc1101(transciver).endTransmission();
              - if:
                  condition:
                    lambda: return id(fireplace_level_id).state == 3;
                  then:
                    - lambda: get_cc1101(transciver).beginTransmission();
                    - remote_transmitter.transmit_raw:
                        code: [
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -800, 800, -400, 400, -400, 400, -800, 400, -400, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -800, 800, -400, 400, -400, 400, -800, 400, -400, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -800, 800, -400, 400, -400, 400, -800, 400, -400, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -800, 800, -400, 400, -400, 400, -800, 400, -400, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -800, 800, -400, 400, -400, 400, -800, 400, -400, 400, -400, 400, -400, 800
                        ]

                    - lambda: get_cc1101(transciver).endTransmission();
              - if:
                  condition:
                    lambda: return id(fireplace_level_id).state == 2;
                  then:
                    - lambda: get_cc1101(transciver).beginTransmission();
                    - remote_transmitter.transmit_raw:
                        code: [
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -400, 400, -400, 400, -400, 400, -400, 400, -800, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -400, 400, -400, 400, -400, 400, -400, 400, -800, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -400, 400, -400, 400, -400, 400, -400, 400, -800, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -400, 400, -400, 400, -400, 400, -400, 400, -800, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -400, 400, -400, 400, -400, 400, -400, 400, -800, 800, -800, 400, -400, 800
                        ]

                    - lambda: get_cc1101(transciver).endTransmission();
              - if:
                  condition:
                    lambda: return id(fireplace_level_id).state == 1;
                  then:
                    - lambda: get_cc1101(transciver).beginTransmission();
                    - remote_transmitter.transmit_raw:
                        code: [
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 800, -400, 400, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 800, -400, 400, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 800, -400, 400, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 800, -400, 400, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 800, -400, 400, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800
                        ]
                    - lambda: get_cc1101(transciver).endTransmission();
    turn_off_action:
      then:
        - if:
            condition:
              lambda: return id(trigger_enabled);
            then:
              - lambda: get_cc1101(transciver).beginTransmission();
              - remote_transmitter.transmit_raw:
                  code: [
                    1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                    1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                    1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                    1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                    1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800
                  ]
              - lambda: get_cc1101(transciver).endTransmission();

globals:
  - id: trigger_enabled
    type: bool
    restore_value: no
    initial_value: "true"
