esphome:
  name: fireplace
  platform: ESP8266
  board: nodemcuv2
  includes:
    - cc1101.h
    - fireplace.h
  libraries:
    - SPI
    - "SmartRC-CC1101-Driver-Lib"

wifi:
  ssid: !secret ssid
  password: !secret password
  fast_connect: true
  power_save_mode: HIGH

logger:
api:
ota:

external_components:
  - source:
      type: local
      path: components

sensor:
  - platform: custom
    lambda: |-
      auto my_sensor = new CC1101(
        D5, // SCK
        D6, // MISO
        D7, // MOSI
        D3, // CSN
        D1, // GDO0
        300, // bandwidth_in_khz
        315 // freq_in_mhz
      );
      App.register_component(my_sensor);
      return {my_sensor};
    sensors:
      id: transciver
      internal: true
remote_transmitter:
  - pin: D1 # This is GDO0
    carrier_duty_percent: 100%

remote_receiver:
  - pin: D2 # This is GDO2
      # on the esp8266 use any of D1,D2,D5,D6,D7,Rx
    # Don't use D3,D4,D8,TX, boot often fails.
    # Can't be D0 or GPIO17 b/c no interrupts

    # Uncomment the following lines to enable dumping signals received to the console
#    dump:
#      - raw
    on_raw:
      - lambda: |-
          int code = getCode(x);
          id(trigger_enabled) = false;
          if (code == 0) {
            id(fireplace).turn_off().perform();
          } else if (code == 6) {
            auto call = id(fireplace).turn_on(); 
            call.set_speed(6);
            call.perform();
          } else if (code == 5) {
            auto call = id(fireplace).turn_on();
            call.set_speed(5);
            call.perform();
          } else if (code == 4) {
            auto call = id(fireplace).turn_on(); 
            call.set_speed(4);
            call.perform();
          } else if (code == 3) {
            auto call = id(fireplace).turn_on(); 
            call.set_speed(3);
            call.perform();
          } else if (code == 2) {
            auto call = id(fireplace).turn_on(); 
            call.set_speed(2);
            call.perform();
          } else if (code == 1) {
            auto call = id(fireplace).turn_on(); 
            call.set_speed(1);
            call.perform();
          }
          id(trigger_enabled) = true;

output:
  - platform: template
    id: fireplace_output_id
    type: float
    write_action:
      - lambda: "return;"

globals:
  - id: trigger_enabled
    type: bool
    restore_value: no
    initial_value: "true"

#TODO: Is there a proper way without global variable to set state without triggering the triggers
fan:
  - platform: speed
    name: Fireplace
    id: fireplace
    icon: "mdi:fire"
    output: fireplace_output_id
    restore_mode: NO_RESTORE
    speed_count: 6
    on_turn_on:
      then:
        - if:
            condition:
              lambda: return id(trigger_enabled);
            then:
              - lambda: id(fireplace).speed = 6;
    on_turn_off:
      then:
        - if:
            condition:
              lambda: return id(trigger_enabled);
            then:
              - lambda: get_cc1101(transciver).beginTransmission();
              - remote_transmitter.transmit_raw:
                  code: [
                    1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                    1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                    1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                    1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                    1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800
                  ]
              - lambda: get_cc1101(transciver).endTransmission();
    on_speed_set:
      then:
        - if:
            condition:
              lambda: return id(trigger_enabled) && id(fireplace).state;
            then:
              - if:
                  condition:
                    lambda: return id(fireplace).speed == 6;
                  then:
                    - lambda: get_cc1101(transciver).beginTransmission();
                    - remote_transmitter.transmit_raw:
                        code: [
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -800, 400, -400, 800
                        ]
                    - lambda: get_cc1101(transciver).endTransmission();
              - if:
                  condition:
                    lambda: return id(fireplace).speed == 5;
                  then:
                    - lambda: get_cc1101(transciver).beginTransmission();
                    - remote_transmitter.transmit_raw:
                        code: [
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 400, -400, 800, -400, 400, -800, 800, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 400, -400, 800, -400, 400, -800, 800, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 400, -400, 800, -400, 400, -800, 800, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 400, -400, 800, -400, 400, -800, 800, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 400, -400, 800, -400, 400, -800, 800, -800, 400, -400, 400, -400, 800
                        ]
                    - lambda: get_cc1101(transciver).endTransmission();
              - if:
                  condition:
                    lambda: return id(fireplace).speed == 4;
                  then:
                    - lambda: get_cc1101(transciver).beginTransmission();
                    - remote_transmitter.transmit_raw:
                        code: [
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 800, -400, 400, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 800, -400, 400, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 800, -400, 400, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 800, -400, 400, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -800, 800, -400, 400, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800
                        ]
                    - lambda: get_cc1101(transciver).endTransmission();
              - if:
                  condition:
                    lambda: return id(fireplace).speed == 3;
                  then:
                    - lambda: get_cc1101(transciver).beginTransmission();
                    - remote_transmitter.transmit_raw:
                        code: [
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -800, 800, -400, 400, -400, 400, -800, 400, -400, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -800, 800, -400, 400, -400, 400, -800, 400, -400, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -800, 800, -400, 400, -400, 400, -800, 400, -400, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -800, 800, -400, 400, -400, 400, -800, 400, -400, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -400, 400, -800, 400, -400, 800, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -800, 800, -400, 400, -400, 400, -800, 400, -400, 400, -400, 400, -400, 800
                        ]

                    - lambda: get_cc1101(transciver).endTransmission();
              - if:
                  condition:
                    lambda: return id(fireplace).speed == 2;
                  then:
                    - lambda: get_cc1101(transciver).beginTransmission();
                    - remote_transmitter.transmit_raw:
                        code: [
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -400, 400, -400, 400, -400, 400, -400, 400, -800, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -400, 400, -400, 400, -400, 400, -400, 400, -800, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -400, 400, -400, 400, -400, 400, -400, 400, -800, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -400, 400, -400, 400, -400, 400, -400, 400, -800, 800, -800, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 800, -400, 400, -400, 400, -400, 400, -400, 400, -800, 800, -800, 400, -400, 800
                        ]

                    - lambda: get_cc1101(transciver).endTransmission();
              - if:
                  condition:
                    lambda: return id(fireplace).speed == 1;
                  then:
                    - lambda: get_cc1101(transciver).beginTransmission();
                    - remote_transmitter.transmit_raw:
                        code: [
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 800, -400, 400, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 800, -400, 400, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 800, -400, 400, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 800, -400, 400, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800, -5000,
                          1200, -400, 400, -800, 800, -400, 400, -800, 400, -400, 800, -800, 800, -400, 400, -400, 400, -400, 1200, -400, 400, -400, 400, -800, 400, -400, 800, -800, 800, -800, 400, -400, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 400, -400, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -800, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 400, -400, 800, -800, 800, -400, 400, -400, 1200, -400, 400, -400, 400, -400, 400, -800, 400, -400, 800, -400, 400, -400, 400, -800, 400, -400, 800, -400, 1200, -800, 400, -400, 400, -400, 800, -400, 400, -400, 400, -400, 400, -800, 400, -400, 400, -400, 800
                        ]
                    - lambda: get_cc1101(transciver).endTransmission();


